admin.controller("nhaphangController",["$scope","$http",function(n,t){function v(){y();h();c();k();b()}function y(){var t=new Date;n.filterNhapHang.denNgay=t;n.filterNhapHang.tuNgay=new Date(t.getFullYear(),t.getMonth(),1);e()}function p(t){var r=!1,u;angular.forEach(n.chitietNhapHangs,function(n){n.idMatHang==t.id&&(r=!0,toastr.warning("Đã tồn tại","Mặt hàng"))});r==!1&&(u={idMatHang:t.id,idNhapHang:n.nhaphang.id,soluong:1,dongia:t.dongia},n.chitietNhapHangs.push(u));i()}function i(){var t=0;angular.forEach(n.chitietNhapHangs,function(i,r){n.chitietNhapHangs[r].thanhtien=parseFloat(i.dongia)*parseFloat(i.soluong);t=parseFloat(t)+parseFloat(n.chitietNhapHangs[r].thanhtien)});n.nhaphang.tongTien=t}function e(){if(n.filterNhapHang.tuNgay==null||n.filterNhapHang.denNgay==null)toastr.warning("Vui lòng chọn Từ ngày - Đến ngày");else{var i=n.filterNhapHang.tuNgay,r=n.filterNhapHang.denNgay;t.get(o+"?tuNgayDay="+i.getDate()+"&&tuNgayMonth="+(i.getMonth()+1)+"&&tuNgayYear="+i.getFullYear()+"&&denNgayDay="+r.getDate()+"&&denNgayMonth="+(r.getMonth()+1)+"&&denNgayYear="+r.getFullYear()).then(function(t){t.status==200&&(n.nhaphangs=t.data)})}}function w(i){i!=null&&t.get(s+"?att=idNhapHang&&value="+i).then(function(t){t.status==200&&(n.chitietNhapHangReviews=angular.copy(t.data))})}function h(){t.get(r).then(function(t){t.status==200&&(n.donvitinhs=t.data)})}function b(){t.get(l).then(function(t){t.status==200&&(n.mathangs=t.data)})}function c(){t.get(u).then(function(t){t.status==200&&(n.lydoNhaps=t.data)})}function k(){t.get(f).then(function(t){t.status==200&&(n.nhacungcaps=t.data)})}var o,s,l,r,u,f,a;n.nhaphangs=[];n.nhaphang={};n.nhaphangReview={};n.selectedNhapHangs=[];n.filterNhapHang={};o="/API/KT_NhapHangAPI";n.chitietNhapHangs=[];n.chitietNhapHang={};n.chitietNhapHangReviews=[];s="/API/KT_ChiTietNhapHangAPI";n.mathangs=[];n.mathang={};n.selectedMatHangs=[];l="/API/DM_MatHangAPI";n.donvitinhs=[];n.donvitinh={};r="/API/DM_DonViTinhAPI";n.lydoNhaps=[];n.lydoNhap={};u="/API/DM_LyDoNhapAPI";n.nhacungcaps=[];n.nhacungcap={};f="/API/DM_NhaCungCapAPI";n.modifyNhapHang=!1;n.deleteNhapHang=!1;n.reviewNhapHang=!1;n.titlePopupModifyNhapHang="Thêm Phiếu nhập hàng";n.popupModifyNhapHang={width:"auto",height:"auto",contentTemplate:"templateModifyNhapHang",showTitle:!0,resizeEnabled:!0,fullScreen:!0,bindingOptions:{title:"titlePopupModifyNhapHang",visible:"modifyNhapHang"}};n.popupDeleteNhapHang={width:"auto",height:"auto",contentTemplate:"templateDeleteNhapHang",showTitle:!1,bindingOptions:{visible:"deleteNhapHang"}};n.popupReviewNhapHang={width:"auto",height:"auto",contentTemplate:"templateReviewNhapHang",showTitle:!0,resizeEnabled:!0,fullScreen:!0,title:"Xem phiếu Nhập hàng",bindingOptions:{visible:"reviewNhapHang"}};n.modifyDonViTinh=!1;n.titlePopupModifyDonViTinh="Thêm đơn vị tính";n.popupModifyDonViTinh={width:"auto",height:"auto",contentTemplate:"templateModifyDonViTinh",showTitle:!0,resizeEnabled:!0,bindingOptions:{title:"titlePopupModifyDonViTinh",visible:"modifyDonViTinh"}};n.modifyLyDoNhap=!1;n.titlePopupModifyLyDoNhap="Thêm lý do nhập";n.popupModifyLyDoNhap={width:"auto",height:"auto",contentTemplate:"templateModifyLyDoNhap",showTitle:!0,resizeEnabled:!0,bindingOptions:{title:"titlePopupModifyLyDoNhap",visible:"modifyLyDoNhap"}};n.modifyNhaCungCap=!1;n.titlePopupModifyNhaCungCap="Thêm nhà cung cấp";n.popupModifyNhaCungCap={width:"auto",height:"auto",contentTemplate:"templateModifyNhaCungCap",showTitle:!0,resizeEnabled:!0,bindingOptions:{title:"titlePopupModifyNhaCungCap",visible:"modifyNhaCungCap"}};n.controlNhapHang={lydoNhap:{displayExpr:"ten",valueExpr:"id",searchEnabled:!0,noDataText:"Không có dữ liệu",placeholder:"Chọn ...",bindingOptions:{items:"lydoNhaps",value:"nhaphang.idLyDoNhap"}},nhacungcap:{displayExpr:"ten",valueExpr:"id",searchEnabled:!0,noDataText:"Không có dữ liệu",placeholder:"Chọn ...",bindingOptions:{items:"nhacungcaps",value:"nhaphang.idNhaCungCap"}},thoigian:{type:"date",displayFormat:"dd/MM/yyyy",bindingOptions:{value:"nhaphang.thoigian"}},ghichu:{height:40,valueChangeEvent:"keyup",bindingOptions:{value:"nhaphang.ghichu"}},addLyDoNhap:{icon:"plus",onClick:function(){n.AddLyDoNhap()}},addNhaCungCap:{icon:"plus",onClick:function(){n.AddNhaCungCap()}}};n.controlNhapHangReview={lydoNhap:{displayExpr:"ten",valueExpr:"id",searchEnabled:!0,noDataText:"Không có dữ liệu",placeholder:"Chọn ...",readOnly:!0,bindingOptions:{items:"lydoNhaps",value:"nhaphangReview.idLyDoNhap"}},nhacungcap:{displayExpr:"ten",valueExpr:"id",searchEnabled:!0,noDataText:"Không có dữ liệu",placeholder:"Chọn ...",readOnly:!0,bindingOptions:{items:"nhacungcaps",value:"nhaphangReview.idNhaCungCap"}},thoigian:{type:"date",displayFormat:"dd/MM/yyyy",readOnly:!0,bindingOptions:{value:"nhaphangReview.thoigian"}},ghichu:{height:40,valueChangeEvent:"keyup",readOnly:!0,bindingOptions:{value:"nhaphangReview.ghichu"}}};n.controlDonViTinh={ten:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"donvitinh.ten"}}};n.controlLyDoNhap={ten:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"lydoNhap.ten"}}};n.controlNhaCungCap={ten:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.ten"}},dienthoai:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.dienthoai"}},diachi:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.diachi"}},email:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.email"}},congty:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.congty"}},masoThue:{showClearButton:!0,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.masoThue"}},ghichu:{height:80,valueChangeEvent:"keyup",bindingOptions:{value:"nhacungcap.ghichu"}}};n.gridNhapHangs={bindingOptions:{dataSource:"nhaphangs","columns[2].lookup.dataSource":"lydoNhaps","columns[3].lookup.dataSource":"nhacungcaps"},allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{emptyPanelText:"Kéo và thả cột muốn ẩn vào đây",enabled:!0,mode:"select",title:"Lựa chọn cột"},columnFixing:{enabled:!0,texts:{fix:"Cố định cột",leftPosition:"Bên trái",rightPosition:"Bên phải",unfix:"Hủy cố định"}},columns:[{alignment:"left",allowEditing:!1,caption:"ID",dataField:"id"},{alignment:"left",caption:"Thời gian",dataField:"thoigian",dataType:"date",format:"dd/MM/yyyy",customizeText:function(n){return n.valueText}},{caption:"Lý do nhập",dataField:"idLyDoNhap",lookup:{displayExpr:"ten",valueExpr:"id"}},{caption:"Nhà cung cấp",dataField:"idNhaCungCap",lookup:{displayExpr:"ten",valueExpr:"id"}},{alignment:"right",caption:"Tổng tiền",dataField:"tongTien",format:{type:"fixedPoint",precision:0}},{alignment:"left",caption:"Ghi chú",dataField:"ghichu",dataType:"string"},],editing:{mode:"cell",allowAdding:!1,allowDeleting:!1,allowUpdating:!1,texts:{addRow:"Thêm",cancelAllChanges:"Không thay đổi",cancelRowChanges:"Hủy",confirmDeleteMessage:"Bạn có chắc chắn muốn xóa?",deleteRow:"Xóa",editRow:"Sửa",saveAllChanges:"Lưu thay đổi",saveRowChanges:"Lưu",undeleteRow:"Không xóa",validationCancelChanges:"Hủy thay đổi"}},"export":{allowExportSelectedData:!0,enabled:!0,excelFilterEnabled:!0,excelWrapTextEnabled:!0,fileName:"Danh sách Phiếu nhập hàng",texts:{exportAll:"Xuất toàn bộ Dữ liệu",exportSelectedRows:"Xuất dữ liệu đang chọn",exportTo:"Trích xuất"}},filterRow:{applyFilterText:"Áp dụng bộ lọc",betweenEndText:"Kết thúc",betweenStartText:"Bắt đầu",resetOperationText:"Thiết lập lại",showAllText:"(Tất cả)",visible:!0},grouping:{contextMenuEnabled:!0,expandMode:"rowClick",texts:{groupByThisColumn:"Nhóm theo Cột này",groupContinuedMessage:"Tiếp tục từ trang trước",groupContinuesMessage:"Tiếp tục trên các trang tiếp theo",ungroup:"Bỏ nhóm",ungroupAll:"Bỏ tất cả nhóm"}},groupPanel:{emptyPanelText:"Kéo một cột vào đây để nhóm theo cột đó",visible:!1},headerFilter:{texts:{cancel:"Hủy",emptyValue:"(Trống)",ok:"Đồng ý"},visible:!0},hoverStateEnabled:!0,loadPanel:{enabled:!0,text:"Đang tải ..."},noDataText:"Không có dữ liệu",pager:{infoText:"Trang {0} của {1}",showInfo:!0,showNavigationButtons:!0,showPageSizeSelector:!0,visible:!0},paging:{enabled:!0,pageIndex:0,pageSize:50},remoteOperations:{grouping:!1,summary:!1},rowAlternationEnabled:!1,scrolling:{preloadEnabled:!0},searchPanel:{placeholder:"Tìm kiếm ..."},selection:{mode:"multiple",showCheckBoxesMode:"onClick"},showBorders:!0,showRowLines:!0,sorting:{ascendingText:"Sắp xếp Tăng dần",clearText:"Xóa Sắp xếp",descendingText:"Sắp xếp Giảm dần"},summary:{texts:{count:"{0}",sum:"{0}"},groupItems:[{column:"id",summaryType:"count"},],totalItems:[{column:"id",summaryType:"count"},{column:"tongTien",summaryType:"sum",valueFormat:"fixedPoint"}]},wordWrapEnabled:!1,onToolbarPreparing:function(t){var i=t.component;t.toolbarOptions.items.unshift({location:"before",widget:"dxDateBox",options:{bindingOptions:{value:"filterNhapHang.tuNgay"},type:"date",displayFormat:"dd/MM/yyyy",hint:"Từ ngày",placeholder:"Từ ngày",max:new Date}},{location:"before",widget:"dxDateBox",options:{bindingOptions:{value:"filterNhapHang.denNgay",min:"filterNhapHang.tuNgay"},type:"date",displayFormat:"dd/MM/yyyy",hint:"Đến ngày",placeholder:"Đến ngày",max:new Date}},{location:"before",widget:"dxButton",options:{hint:"Lọc",icon:"search",type:"primary",onClick:function(){e()}}},{location:"after",widget:"dxButton",options:{hint:"Thêm",icon:"add",type:"success",onClick:function(){n.AddNhapHang()}}},{location:"after",widget:"dxButton",options:{hint:"Xem",icon:"search",type:"default",onClick:function(){n.ReviewNhapHang()}}},{location:"after",widget:"dxButton",options:{hint:"Xóa",icon:"trash",type:"danger",onClick:function(){n.DeleteNhapHang()}}},{location:"after",widget:"dxButton",options:{hint:"Load lại Dữ liệu",icon:"refresh",onClick:function(){e()}}})},onRowClick:function(t){var i=t.component;i.clickCount=i.clickCount?i.clickCount+1:1;i.clickCount==1?(i.lastClickTime=new Date,setTimeout(function(){i.lastClickTime=0;i.clickCount=0},350)):i.clickCount==2&&(new Date-i.lastClickTime<300&&(n.nhaphangReview=angular.copy(t.data),n.ReviewNhapHang()),i.clickCount=0,i.lastClickTime=0)},onSelectionChanged:function(t){n.selectedNhapHangs=angular.copy(t.selectedRowsData)}};n.gridChiTietNhapHangs={bindingOptions:{dataSource:"chitietNhapHangs","columns[0].lookup.dataSource":"mathangs","columns[1].lookup.dataSource":"mathangs"},allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{emptyPanelText:"Kéo và thả cột muốn ẩn vào đây",enabled:!1,mode:"select",title:"Lựa chọn cột"},columnFixing:{enabled:!0,texts:{fix:"Cố định cột",leftPosition:"Bên trái",rightPosition:"Bên phải",unfix:"Hủy cố định"}},columns:[{caption:"Mặt hàng",dataField:"idMatHang",lookup:{displayExpr:"ten",valueExpr:"id"},allowEditing:!1},{caption:"ĐVT",dataField:"idMatHang",lookup:{displayExpr:"donvitinh",valueExpr:"id"},allowEditing:!1},{alignment:"right",caption:"Đơn giá",dataField:"dongia",format:{type:"fixedPoint",precision:0}},{alignment:"right",caption:"SL",dataField:"soluong",format:{type:"fixedPoint",precision:3}},{alignment:"right",caption:"Thành tiền",dataField:"thanhtien",format:{type:"fixedPoint",precision:0},allowEditing:!1},],editing:{mode:"cell",allowAdding:!1,allowDeleting:!0,allowUpdating:!0,texts:{addRow:"Thêm",cancelAllChanges:"Không thay đổi",cancelRowChanges:"Hủy",confirmDeleteMessage:"Bạn có chắc chắn muốn xóa?",deleteRow:"Xóa",editRow:"Sửa",saveAllChanges:"Lưu thay đổi",saveRowChanges:"Lưu",undeleteRow:"Không xóa",validationCancelChanges:"Hủy thay đổi"}},"export":{allowExportSelectedData:!0,enabled:!1,excelFilterEnabled:!0,excelWrapTextEnabled:!0,fileName:"Danh sách Thực đơn",texts:{exportAll:"Xuất toàn bộ Dữ liệu",exportSelectedRows:"Xuất dữ liệu đang chọn",exportTo:"Trích xuất"}},filterRow:{applyFilterText:"Áp dụng bộ lọc",betweenEndText:"Kết thúc",betweenStartText:"Bắt đầu",resetOperationText:"Thiết lập lại",showAllText:"(Tất cả)",visible:!1},grouping:{contextMenuEnabled:!1,expandMode:"rowClick",texts:{groupByThisColumn:"Nhóm theo Cột này",groupContinuedMessage:"Tiếp tục từ trang trước",groupContinuesMessage:"Tiếp tục trên các trang tiếp theo",ungroup:"Bỏ nhóm",ungroupAll:"Bỏ tất cả nhóm"}},groupPanel:{emptyPanelText:"Kéo một cột vào đây để nhóm theo cột đó",visible:!1},headerFilter:{texts:{cancel:"Hủy",emptyValue:"(Trống)",ok:"Đồng ý"},visible:!1},hoverStateEnabled:!1,loadPanel:{enabled:!0,text:"Đang tải ..."},noDataText:"Không có dữ liệu",pager:{infoText:"Trang {0} của {1}",showInfo:!0,showNavigationButtons:!0,showPageSizeSelector:!0,visible:!0},paging:{enabled:!0,pageIndex:0,pageSize:50},remoteOperations:{grouping:!1,summary:!1},rowAlternationEnabled:!1,scrolling:{preloadEnabled:!0},searchPanel:{placeholder:"Tìm kiếm ..."},selection:{mode:"multiple",showCheckBoxesMode:"none"},showBorders:!0,showRowLines:!0,sorting:{ascendingText:"Sắp xếp Tăng dần",clearText:"Xóa Sắp xếp",descendingText:"Sắp xếp Giảm dần"},summary:{texts:{count:"{0}",sum:"{0}"},groupItems:[{column:"id",summaryType:"count"}],totalItems:[{column:"id",summaryType:"count"}]},wordWrapEnabled:!1,onRowInserted:function(){i()},onRowRemoved:function(){i()},onRowUpdated:function(){i()}};n.gridChiTietNhapHangReviews={bindingOptions:{dataSource:"chitietNhapHangReviews","columns[0].lookup.dataSource":"mathangs","columns[1].lookup.dataSource":"mathangs"},allowColumnResizing:!0,columnAutoWidth:!0,columnChooser:{emptyPanelText:"Kéo và thả cột muốn ẩn vào đây",enabled:!1,mode:"select",title:"Lựa chọn cột"},columnFixing:{enabled:!0,texts:{fix:"Cố định cột",leftPosition:"Bên trái",rightPosition:"Bên phải",unfix:"Hủy cố định"}},columns:[{caption:"Mặt hàng",dataField:"idMatHang",lookup:{displayExpr:"ten",valueExpr:"id"},allowEditing:!1},{caption:"ĐVT",dataField:"idMatHang",lookup:{displayExpr:"donvitinh",valueExpr:"id"},allowEditing:!1},{alignment:"right",caption:"Đơn giá",dataField:"dongia",format:{type:"fixedPoint",precision:0}},{alignment:"right",caption:"SL",dataField:"soluong",format:{type:"fixedPoint",precision:3}},{alignment:"right",caption:"Thành tiền",dataField:"thanhtien",format:{type:"fixedPoint",precision:0},allowEditing:!1},],editing:{mode:"cell",allowAdding:!1,allowDeleting:!1,allowUpdating:!1,texts:{addRow:"Thêm",cancelAllChanges:"Không thay đổi",cancelRowChanges:"Hủy",confirmDeleteMessage:"Bạn có chắc chắn muốn xóa?",deleteRow:"Xóa",editRow:"Sửa",saveAllChanges:"Lưu thay đổi",saveRowChanges:"Lưu",undeleteRow:"Không xóa",validationCancelChanges:"Hủy thay đổi"}},"export":{allowExportSelectedData:!0,enabled:!1,excelFilterEnabled:!0,excelWrapTextEnabled:!0,fileName:"Danh sách Thực đơn",texts:{exportAll:"Xuất toàn bộ Dữ liệu",exportSelectedRows:"Xuất dữ liệu đang chọn",exportTo:"Trích xuất"}},filterRow:{applyFilterText:"Áp dụng bộ lọc",betweenEndText:"Kết thúc",betweenStartText:"Bắt đầu",resetOperationText:"Thiết lập lại",showAllText:"(Tất cả)",visible:!1},grouping:{contextMenuEnabled:!1,expandMode:"rowClick",texts:{groupByThisColumn:"Nhóm theo Cột này",groupContinuedMessage:"Tiếp tục từ trang trước",groupContinuesMessage:"Tiếp tục trên các trang tiếp theo",ungroup:"Bỏ nhóm",ungroupAll:"Bỏ tất cả nhóm"}},groupPanel:{emptyPanelText:"Kéo một cột vào đây để nhóm theo cột đó",visible:!1},headerFilter:{texts:{cancel:"Hủy",emptyValue:"(Trống)",ok:"Đồng ý"},visible:!1},hoverStateEnabled:!1,loadPanel:{enabled:!0,text:"Đang tải ..."},noDataText:"Không có dữ liệu",pager:{infoText:"Trang {0} của {1}",showInfo:!0,showNavigationButtons:!0,showPageSizeSelector:!0,visible:!0},paging:{enabled:!0,pageIndex:0,pageSize:50},remoteOperations:{grouping:!1,summary:!1},rowAlternationEnabled:!1,scrolling:{preloadEnabled:!0},searchPanel:{placeholder:"Tìm kiếm ..."},selection:{mode:"multiple",showCheckBoxesMode:"none"},showBorders:!0,showRowLines:!0,sorting:{ascendingText:"Sắp xếp Tăng dần",clearText:"Xóa Sắp xếp",descendingText:"Sắp xếp Giảm dần"},summary:{texts:{count:"{0}",sum:"{0}"},groupItems:[{column:"id",summaryType:"count"}],totalItems:[{column:"id",summaryType:"count"}]},wordWrapEnabled:!1,onRowInserted:function(){i()},onRowRemoved:function(){i()},onRowUpdated:function(){i()}};n.lookupMatHangs={bindingOptions:{items:"mathangs",value:"mathang.id"},cancelButtonText:"Đóng",clearButtonText:"Xóa",displayExpr:"ten",nextButtonText:"Thêm",noDataText:"Không có dữ liệu",valueExpr:"id",title:"Chọn mặt hàng",pageLoadingText:"Đang tải...",placeholder:"Chọn mặt hàng",searchPlaceholder:"Tìm kiếm",onItemClick:function(n){p(n.itemData)},onClosed:function(){var n=$("#lookupMatHangs").dxLookup("instance");n.reset()}};a=[{value:"add",text:" Thêm",icon:"fa fa-plus"},{value:"review",text:" Xem",icon:"fa fa-search"},{value:"delete",text:" Xóa",icon:"fa fa-times"}];n.contextMenuNhapHang={dataSource:a,width:100,target:"#nhaphang",itemTemplate:function(n){var t=$("<div><\/div>");return n.icon&&t.append('<span class="'+n.icon+'"><span>'),t.append(n.text),t},onItemClick:function(t){if(!t.itemData.items)switch(t.itemData.value){case"add":n.AddNhapHang();break;case"review":n.ReviewNhapHang();break;case"delete":n.DeleteNhapHang()}}};v();n.AddNhapHang=function(){n.nhaphang={thoigian:new Date,idLyDoNhap:1,tongTien:0};n.chitietNhapHangs=[];n.chitietNhapHang={};n.titlePopupModifyNhapHang="Thêm Phiếu nhập hàng";n.modifyNhapHang=!0};n.SaveNhapHang=function(){t.post(o,n.nhaphang).then(function(i){i.status==201?(n.nhaphang=angular.copy(i.data),angular.forEach(n.chitietNhapHangs,function(i){i.idNhapHang=n.nhaphang.id;t.post(s,i).then(function(n){t.get("/MatHang/NhapHang/"+n.data.id).then(function(){})})}),n.modifyNhapHang=!1,toastr.success("Thành công","Lưu"),e()):toastr.error("Thất bại","Lưu")})};n.CancelSaveNhapHang=function(){n.nhaphang={};n.chitietNhapHangs=[];n.chitietNhapHang={};n.modifyNhapHang=!1};n.DeleteNhapHang=function(){n.selectedNhapHangs.length==0?toastr.error("Chọn dòng để xóa"):n.deleteNhapHang=!0};n.ConfirmDeleteNhapHang=function(){angular.forEach(n.selectedNhapHangs,function(i){t.delete("/NhapHang/Delete/"+i.id).then(function(t){t.status==200&&t.data==1?angular.forEach(n.nhaphangs,function(t,r){i.id===t.id&&n.nhaphangs.splice(r,1)}):toastr.error("Thất bại","Xóa")})});toastr.success("Thành công","Xóa");n.deleteNhapHang=!1};n.CancelDeleteNhapHang=function(){n.deleteNhapHang=!1};n.ReviewNhapHang=function(){n.selectedNhapHangs.length==0?toastr.error("Chọn 1 dòng để xem"):(n.nhaphangReview=angular.copy(n.selectedNhapHangs[0]),w(n.nhaphangReview.id),n.reviewNhapHang=!0)};n.AddDonViTinh=function(){n.donvitinh={};n.titlePopupModifyDonViTinh="Thêm đơn vị tính";n.modifyDonViTinh=!0};n.SaveDonViTinh=function(){angular.isDefined(n.donvitinh.id)?t.put(r+"/"+n.donvitinh.id,n.donvitinh).then(function(t){t.status==204?(h(),toastr.success("Thành công","Sửa"),n.modifyDonViTinh=!1):toastr.error("Thất bại","Sửa")}):t.post(r,n.donvitinh).then(function(t){t.status==201?(h(),toastr.success("Thành công","Thêm"),n.modifyDonViTinh=!1):toastr.error("Thất bại","Thêm")})};n.CancelSaveDonViTinh=function(){n.modifyDonViTinh=!1};n.AddLyDoNhap=function(){n.lydoNhap={};n.titlePopupModifyLyDoNhap="Thêm lý do nhập";n.modifyLyDoNhap=!0};n.SaveLyDoNhap=function(){angular.isDefined(n.lydoNhap.id)?t.put(u+"/"+n.lydoNhap.id,n.lydoNhap).then(function(t){t.status==204?(c(),toastr.success("Thành công","Sửa"),n.modifyLyDoNhap=!1):toastr.error("Thất bại","Sửa")}):t.post(u,n.lydoNhap).then(function(t){t.status==201?(c(),toastr.success("Thành công","Thêm"),n.modifyLyDoNhap=!1):toastr.error("Thất bại","Thêm")})};n.CancelSaveLyDoNhap=function(){n.modifyLyDoNhap=!1};n.AddNhaCungCap=function(){n.nhacungcap={};n.titlePopupModifyNhaCungCap="Thêm nhà cung cấp";n.modifyNhaCungCap=!0};n.SaveNhaCungCap=function(){angular.isDefined(n.nhacungcap.id)?t.put(f+"/"+n.nhacungcap.id,n.nhacungcap).then(function(t){t.status==204?angular.forEach(n.nhacungcaps,function(t,i){t.id==n.nhacungcap.id&&(n.nhacungcaps[i]=angular.copy(n.nhacungcap),toastr.success("Thành công","Sửa"),n.modifyNhaCungCap=!1)}):toastr.error("Thất bại","Sửa")}):t.post(f,n.nhacungcap).then(function(t){t.status==201?(n.nhacungcaps.push(t.data),toastr.success("Thành công","Thêm"),n.modifyNhaCungCap=!1):toastr.error("Thất bại","Thêm")})};n.CancelSaveNhaCungCap=function(){n.modifyNhaCungCap=!1}}]);